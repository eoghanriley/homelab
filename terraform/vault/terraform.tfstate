{"version":4,"terraform_version":"1.10.7","serial":3,"lineage":"7b2fef76-c704-2794-397d-07a0a20002ab","outputs":{"foundry_policy_created":{"value":"foundry-policy","type":"string"},"foundry_role_created":{"value":"foundry","type":"string"},"vault_address":{"value":"http://192.168.86.149:31584","type":"string"}},"resources":[{"mode":"data","type":"kubernetes_service","name":"kubernetes","provider":"provider[\"registry.opentofu.org/hashicorp/kubernetes\"]","instances":[{"schema_version":0,"attributes":{"id":"default/kubernetes","metadata":[{"annotations":{},"generation":0,"labels":{"component":"apiserver","provider":"kubernetes"},"name":"kubernetes","namespace":"default","resource_version":"203","uid":"61b18dce-da92-4277-8a76-433e6438e486"}],"spec":[{"allocate_load_balancer_node_ports":true,"cluster_ip":"10.96.0.1","cluster_ips":["10.96.0.1"],"external_ips":[],"external_name":"","external_traffic_policy":"","health_check_node_port":0,"internal_traffic_policy":"Cluster","ip_families":["IPv4"],"ip_family_policy":"SingleStack","load_balancer_class":"","load_balancer_ip":"","load_balancer_source_ranges":[],"port":[{"app_protocol":"","name":"https","node_port":0,"port":443,"protocol":"TCP","target_port":"6443"}],"publish_not_ready_addresses":false,"selector":{},"session_affinity":"None","session_affinity_config":[],"type":"ClusterIP"}],"status":[{"load_balancer":[{"ingress":[]}]}]},"sensitive_attributes":[]}]},{"mode":"managed","type":"vault_auth_backend","name":"kubernetes","provider":"provider[\"registry.opentofu.org/hashicorp/vault\"]","instances":[{"schema_version":1,"attributes":{"accessor":"auth_kubernetes_c7d17abe","description":"","disable_remount":false,"id":"kubernetes","identity_token_key":null,"local":false,"namespace":null,"path":"kubernetes","tune":[],"type":"kubernetes"},"sensitive_attributes":[],"private":"eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="}]},{"mode":"managed","type":"vault_kubernetes_auth_backend_config","name":"config","provider":"provider[\"registry.opentofu.org/hashicorp/vault\"]","instances":[{"schema_version":0,"attributes":{"backend":"kubernetes","disable_iss_validation":false,"disable_local_ca_jwt":false,"id":"auth/kubernetes/config","issuer":"","kubernetes_ca_cert":"","kubernetes_host":"https://kubernetes.default.svc:443","namespace":null,"pem_keys":[],"token_reviewer_jwt":"","use_annotations_as_alias_metadata":false},"sensitive_attributes":[[{"type":"get_attr","value":"token_reviewer_jwt"}]],"private":"bnVsbA==","dependencies":["vault_auth_backend.kubernetes"]}]},{"mode":"managed","type":"vault_kubernetes_auth_backend_role","name":"foundry","provider":"provider[\"registry.opentofu.org/hashicorp/vault\"]","instances":[{"schema_version":0,"attributes":{"alias_name_source":"serviceaccount_uid","audience":null,"backend":"kubernetes","bound_service_account_names":["foundry-vtt"],"bound_service_account_namespaces":["foundry-vtt"],"id":"auth/kubernetes/role/foundry","namespace":null,"role_name":"foundry","token_bound_cidrs":[],"token_explicit_max_ttl":0,"token_max_ttl":0,"token_no_default_policy":false,"token_num_uses":0,"token_period":0,"token_policies":["foundry-policy"],"token_ttl":86400,"token_type":"default"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["vault_auth_backend.kubernetes","vault_policy.foundry"]}]},{"mode":"managed","type":"vault_kubernetes_auth_backend_role","name":"smb","provider":"provider[\"registry.opentofu.org/hashicorp/vault\"]","instances":[{"schema_version":0,"attributes":{"alias_name_source":"serviceaccount_uid","audience":null,"backend":"kubernetes","bound_service_account_names":["*"],"bound_service_account_namespaces":["default","foundry-vtt","kube-system"],"id":"auth/kubernetes/role/smb-csi","namespace":null,"role_name":"smb-csi","token_bound_cidrs":null,"token_explicit_max_ttl":0,"token_max_ttl":0,"token_no_default_policy":false,"token_num_uses":0,"token_period":0,"token_policies":["smb-policy"],"token_ttl":86400,"token_type":"default"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["vault_auth_backend.kubernetes","vault_policy.smb"]}]},{"mode":"managed","type":"vault_kv_secret_v2","name":"foundry_credentials","provider":"provider[\"registry.opentofu.org/hashicorp/vault\"]","instances":[{"schema_version":0,"attributes":{"cas":null,"custom_metadata":[{"cas_required":false,"data":{},"delete_version_after":0,"max_versions":0}],"data":{"admin_key":"your-admin-key","password":"your-foundry-password","username":"your-foundry-username"},"data_json":"{\"admin_key\":\"your-admin-key\",\"password\":\"your-foundry-password\",\"username\":\"your-foundry-username\"}","delete_all_versions":false,"disable_read":false,"id":"secret/data/foundry/credentials","metadata":{"created_time":"2025-12-25T01:59:03.033345165Z","custom_metadata":"null","deletion_time":"","destroyed":"false","version":"1"},"mount":"secret","name":"foundry/credentials","namespace":null,"options":null,"path":"secret/data/foundry/credentials"},"sensitive_attributes":[[{"type":"get_attr","value":"data"}],[{"type":"get_attr","value":"data_json"}]],"private":"bnVsbA==","dependencies":["vault_mount.kv"]}]},{"mode":"managed","type":"vault_kv_secret_v2","name":"smb_credentials","provider":"provider[\"registry.opentofu.org/hashicorp/vault\"]","instances":[{"schema_version":0,"attributes":{"cas":null,"custom_metadata":[{"cas_required":false,"data":{},"delete_version_after":0,"max_versions":0}],"data":{"password":"Qualifier8-Waffle-Purchase","username":"k8s-storage"},"data_json":"{\"password\":\"Qualifier8-Waffle-Purchase\",\"username\":\"k8s-storage\"}","delete_all_versions":false,"disable_read":false,"id":"secret/data/smb/credentials","metadata":{"created_time":"2025-12-25T02:14:39.823731839Z","custom_metadata":"null","deletion_time":"","destroyed":"false","version":"1"},"mount":"secret","name":"smb/credentials","namespace":null,"options":null,"path":"secret/data/smb/credentials"},"sensitive_attributes":[[{"type":"get_attr","value":"data_json"}],[{"type":"get_attr","value":"data"}]],"private":"bnVsbA==","dependencies":["vault_mount.kv"]}]},{"mode":"managed","type":"vault_mount","name":"kv","provider":"provider[\"registry.opentofu.org/hashicorp/vault\"]","instances":[{"schema_version":0,"attributes":{"accessor":"kv_3341b6f1","allowed_managed_keys":[],"allowed_response_headers":[],"audit_non_hmac_request_keys":[],"audit_non_hmac_response_keys":[],"default_lease_ttl_seconds":0,"delegated_auth_accessors":null,"description":"KV Version 2 secret engine mount","external_entropy_access":false,"id":"secret","identity_token_key":"","listing_visibility":"","local":false,"max_lease_ttl_seconds":0,"namespace":null,"options":{"version":"2"},"passthrough_request_headers":[],"path":"secret","plugin_version":null,"seal_wrap":false,"type":"kv"},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"vault_policy","name":"foundry","provider":"provider[\"registry.opentofu.org/hashicorp/vault\"]","instances":[{"schema_version":0,"attributes":{"id":"foundry-policy","name":"foundry-policy","namespace":null,"policy":"path \"secret/data/foundry/*\" {\n  capabilities = [\"read\", \"list\"]\n}\n"},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"vault_policy","name":"smb","provider":"provider[\"registry.opentofu.org/hashicorp/vault\"]","instances":[{"schema_version":0,"attributes":{"id":"smb-policy","name":"smb-policy","namespace":null,"policy":"path \"secret/data/smb/*\" {\n  capabilities = [\"read\", \"list\"]\n}\n"},"sensitive_attributes":[],"private":"bnVsbA=="}]}],"check_results":null}
